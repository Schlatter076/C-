//-----------------------------------------------------------------------------
// eeprom.c
//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include "main/configure.h"
//-----------------------------------------------------------------------------
// Function Prototype
//-----------------------------------------------------------------------------
void Eeprom_Write ( int Address, char Data );
char Eeprom_Read ( int Address );
//-----------------------------------------------------------------------------
// Eeprom Write Rountine
//-----------------------------------------------------------------------------
void Eeprom_Write ( int Address, char Data )
{
	while (EECR & (1<<EEWE));
	while (SPMCR & (1<<SPMEN));
	CLI;
	EEAR = Address;
	EEDR = Data;
	EECR |= (1<<EEMWE);
	EECR |= (1<<EEWE);
	SEI;
}
//-----------------------------------------------------------------------------
// Eeprom Read Rountine
//-----------------------------------------------------------------------------
char Eeprom_Read ( int Address )
{
	char temp = 0;

	while (EECR & (1<<EEWE));
	while (SPMCR & (1<<SPMEN));
	CLI;
	EEAR = Address;
	EECR |= (1<<EERE);
	temp = EEDR;
	SEI;
	return temp;
}
